parameters:
  imageName: ''
  imagePath: ''
  dockerFilePath: ''
  imageVersion: ''
  pipelineAcrConnection: ''
  registryName: ''
  AGENT_POOL: ''
  AGENT_NAME: ''



# variables:
# - group: arm-vg
# - group: iac-backend-vg
# - group: aks-backend-vg
# - group: backend-secrets-vg

steps:
- checkout: self
  persistCredentials: true
  clean: true
  condition: ne('${{ parameters.image }}', 'all')
    - template: 'templates/images-template.yml'
      parameters:
        selectedImage: ${{ parameters.image }} # Pass the selected image as a parameter
        imageVersion: $(major).$(minor).$(GitBuildNumber).$(TIME)
        registryName: $(registryName)
        pipelineAcrConnection: $(pipelineAcrConnection)
    - task: Bash@3
      inputs:
        targetType: 'inline'
        script: |
          echo 'selectedImage: ${{ parameters.imageName }}'
          echo 'imageVersion: ${{ parameters.imageVersion }}'
          echo 'imagePath: ${{ parameters.imagePath }}'
          echo 'imagePath: ${{ parameters.imagePath }}'
          echo 'registryName: ${{ parameters.registry }}'
          echo 'pipelineAcrConnection: ${{ parameters.pipelineAcrConnection }}'

      name: printParameters
      
